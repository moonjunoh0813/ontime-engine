# Ontime Engine 최종 보고서 (Day9)

## 1) 목표
- 목표 도착시간을 입력하면, “지각 확률이 낮은 안전한 권장 출발시각 1개”를 산출한다.
- 핵심은 UI가 아니라 Decision Engine(역산 엔진)과 교통 데이터 신뢰성 검증이다.

## 2) 고정 검증 경로(1개)
집 → 도보 → (이마트앞 정류장) 51 → (미금역 인근) → 도보 → 미금역 → 수인분당선 → 청명역 → 도보 →
(청명역 4번출구 정류장) 5100 → 경희대 정문 → 도보 → 학교

## 3) 구현된 시스템
- 역산 엔진(뒤에서 앞으로 계산): 목표 도착시간에서 이동/대기/버퍼를 차감하며 출발시각 산출
- wait_provider 주입 구조: 대기시간 계산은 엔진 내부가 아니라 외부 함수로 분리
- 실시간 데이터:
  - 버스: GBIS(data.go.kr)로 51/5100 ETA 수집 성공 (정류장 ID 고정)
  - 지하철: 서울 도착정보 API는 미금/청명 미제공 → realtimePosition 기반 “위치 추정 ETA”로 우회
- 스냅샷 방식: 한 번의 수집으로 wait_provider 스냅샷을 만들고 엔진에 적용(반복 호출 방지)
- API: POST /compute 로 엔진 호출 가능

## 4) 데이터 수집/분석 핵심 결과

### 4.1 수집/연동 안정성
- Day6/Day7/Day8 측정에서 errors=0, missing=0% (버스/지하철/엔진 모두)
- 1분 주기 수집의 샘플링 간격이 안정적(약 62초)

### 4.2 고정 목표 도착시간(현실적 B2C 핵심) 변동성
- Day7 오전(07:40~08:41): 출발시각 span 29분, 단일 점프 최대 25분, 5분 이상 점프 6회
- Day8 오전 재계산: 출발시각 span 29분, 단일 점프 최대 29분, 5분 이상 점프 10회
- 결론: “사용자가 앱을 켜는 시점”에 따라 권장 출발시각이 크게 바뀔 수 있음(신뢰도 리스크)

### 4.3 상대 목표(지금+N분) 안정성
- Day8 낮 재계산: slack_min(출발-현재) min=max=avg=31분 (60샘플 전부 동일)
- 결론: 상대 목표 모드에서는 “출발 전 확인”이 항상 보장되고 매우 안정적

## 5) 최종 판정: Pivot 권장
- Go(그대로 출시): 비추천 — 고정 목표 도착시간에서 변동성이 너무 큼
- Stop: 비추천 — 데이터 수집/연동은 안정적이며 개선 여지가 큼
- Pivot: 권장
  - Pivot A: 상대 목표(지금+N분) 중심 UX로 빠르게 B2C 출시
  - Pivot B: 고정 목표 모드에 정책/UX 보강
    - 단일 시각 대신 “추천 출발 + 범위(신뢰구간)” 제공
    - 보수적(퍼센타일) 정책/스무딩/변동 제한 정책 적용
    - 버스 다중 차량(predictTime1/2) 반영, 지하철 구간별 학습 기반 ETA 고도화

## 6) 다음 액션
- 피크 시간대(저녁 포함) 데이터 반복 수집으로 분포 확인(평일 중심)
- 고정 목표 모드에서 변동폭을 ±2분 목표로 줄이는 정책 실험(로그 기반 재계산으로 빠르게 반복)
- 정책 적용 후 Day8 방식으로 재평가 → Go/Pivot 최종 확정
